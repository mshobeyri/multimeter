type: api
inputs:
  - username: c:username
  - password: c:password
  - traceId: c:traceId
outputs:
  - session: c:session
  - errors: c:errors
interfaces:
  - name: http-json    
    protocol: http
    format: json
    endpoint: e:endpoint
    headers:
      traceId: a:traceId
      content-type: application/json
    body: |
      {
        {a:traceId && ("username": "a:username",)}
        "username": "a:username",
        "password": "a:password"
      }
    outputs:
      session: 
        json: body.session
      errors: body.errors[0] #json:format is json
  - name: http-xml
    protocol: http
    format: xml
    endpoint: e:endpoint
    headers:
      traceId: a:traceId
      content-type: application/xml
    body: |
      <body>
        <session>a:session</session>
      </body>
    outputs:
      session:
        regex: body, /<session>(.*)<\\/session>/
      errors: body.errors[0] #xml: formatis xml
tags: 
  - security
  - sessionless

documentation:
  - title: Generate Session
    description: This API generates a session based on the provided username and password.
    inputs:
      - name: username
        type: string
        description: The username for the session.
      - name: password
        type: string
        description: The password for the session.
      - name: traceId
        type: string
        description: A unique identifier for tracing the request.
    outputs:
      - name: session
        type: string
        description: The generated session ID.
      - name: errors
        type: array
        items:
          type: string
        description: Any errors encountered during session generation.
